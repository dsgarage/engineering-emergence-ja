# 第4回講義：Mission/Spaceフレームワーク（Chapter 5）

## 1. レベルデザインの2つの構造

レベルデザインを分析するために、2つの独立したグラフ構造を用いる。

- **ミッション（Mission）：** プレイヤーが達成すべきタスクの構造をグラフで表現する。「何をするか」の設計。
- **スペース（Space）：** ゲーム空間の幾何学的構成をグラフで表現する。「どこでするか」の設計。

この2つを分離して考えることで、レベルデザインの本質を明確に分析できる。

> **重要ポイント：** ミッションは「タスクの論理構造」、スペースは「空間の物理構造」である。同じミッションでも異なるスペースに配置でき、逆もまた然りである。この分離がレベルデザインの柔軟性を生む。

---

## 2. ミッショングラフ

### 2.1 構成要素

- **ノード：** 個々のタスク（戦闘、パズル、鍵の獲得、ボス戦など）
- **エッジ：** タスク間の依存関係

### 2.2 接続タイプ

| タイプ | 意味 | 例 |
|--------|------|-----|
| **弱い要求（Weak Requirement）** | 推奨される順序。従わなくても進行可能 | 「先に回復アイテムを取ることを推奨」 |
| **強い要求（Hard Requirement）** | 必須の順序。前提タスクの完了が必要 | 「ボスキーがないとボス部屋に入れない」 |
| **抑制（Inhibition）** | ロック。特定条件を満たすまで進行を阻止 | 「赤い扉は赤い鍵で開く」 |

> **重要ポイント：** 強い要求と抑制の違いに注意。強い要求は「Aを完了しないとBに進めない」という順序制約であり、抑制は「特定のアイテムや条件がロックを解除する」というメカニズムである。

---

## 3. スペースグラフ

### 3.1 構成要素

- **ノード：** 場所（部屋、エリア、ゾーンなど）
- **エッジ：** 通路（場所間の接続）

### 3.2 通路の種類

- **双方向通路：** 行き来が自由にできる（通常の扉や廊下）
- **一方通行通路：** 片方向のみ移動可能（崖から飛び降りる、一方通行ゲートなど）

> **重要ポイント：** スペースグラフは純粋に空間のトポロジー（接続関係）を表し、距離や面積といったメトリクスは含まない。空間の「つながり方」に焦点を当てる。

---

## 4. ミッションからスペースへのマッピング

同一のミッション構造を異なるスペースに配置できる。

### 4.1 直線的マッピング

- タスクの順序とスペースの配置が一致
- 一本道のレベル構成
- わかりやすいが、探索の自由度が低い

### 4.2 非直線的マッピング

- タスクの順序とスペースの配置が必ずしも一致しない
- プレイヤーが空間を行き来しながらタスクを達成
- 探索の自由度が高く、リプレイ性も向上

> **重要ポイント：** マッピングの方法がプレイヤー体験を大きく左右する。直線的マッピングはナラティブ主導のゲームに、非直線的マッピングは探索主導のゲームに適する。

---

## 5. ロックと鍵のメカニズム

レベルデザインにおける進行制御の基本構造。

### 5.1 ロック（Lock）

プレイヤーの進行を阻止するバリア。対応する鍵がなければ通過できない。

### 5.2 鍵（Key）

ロックを解除するための手段。以下のように多様な形態をとる。

| 鍵の種類 | 例 |
|----------|-----|
| **物理的な鍵** | ドアの鍵、スイッチ、ボタン |
| **能力（Ability）** | 二段ジャンプ、爆弾、フックショット |
| **情報（Knowledge）** | パスワード、暗号の解答、NPC からの情報 |

> **重要ポイント：** ロックと鍵は単なる「扉と鍵アイテム」に限定されない。能力の獲得や情報の入手もロック解除として機能する。メトロイドヴァニア系ゲームでは能力型の鍵が中心的な役割を果たす。

---

## 6. ゼルダの伝説「森の神殿」の分析

複雑なレベルデザインの実例分析。

### 6.1 構造の特徴

- 複数のロックと鍵が入れ子状に配置されている
- プレイヤーは神殿内を何度も行き来する（バックトラッキング）
- 小鍵・ボスキー・特殊アイテムなど複数の鍵タイプが共存

### 6.2 ミッションとスペースの関係

- **ミッショングラフ：** 鍵の獲得 → ロック解除 → 次の鍵の獲得...という連鎖構造
- **スペースグラフ：** 中央ホールを起点に複数の翼が分岐するハブ型構造
- ミッション上は線形に見えるが、スペース上では非線形に見える

### 6.3 バックトラッキングの設計

- ショートカットの配置により、バックトラッキングの煩わしさを軽減
- 新たな能力獲得後に以前の場所を再訪する意味を持たせている

> **重要ポイント：** 森の神殿はミッションの線形性とスペースの非線形性を巧みに組み合わせた好例。バックトラッキングを退屈にさせないための工夫（ショートカット、新発見）がレベルデザインの質を決める。

---

## 7. コンストラクション

ミッショングラフからスペースグラフを体系的に生成する手法。

### 7.1 タイトなコンストラクション（Tight Construction）

- ミッションとスペースが密接に対応
- 各タスクが固有の場所に配置される
- 無駄のないコンパクトなレベルになる

### 7.2 ルーズなコンストラクション（Loose Construction）

- ミッションとスペースの対応が緩やか
- 余分な部屋や通路が追加される
- 探索の余地が広がり、空間が豊かになる

> **重要ポイント：** タイトなコンストラクションは効率的だが窮屈になりがち。ルーズなコンストラクションは冗長だが探索の楽しさが増す。ゲームの目的に応じて使い分ける。

---

## 8. ミッション/スペースの形態分析（Morphology）

レベルの空間構造を類型化したもの。

| 形態 | 構造 | 特徴 |
|------|------|------|
| **コリドー型（Corridor）** | 一本道の直線構造 | 強いナラティブ誘導。進行方向が明確 |
| **ハブ型（Hub）** | 中央から放射状に分岐 | プレイヤーに選択肢を提供。順序の自由度が高い |
| **ループ型（Loop）** | 環状の経路構造 | バックトラッキングを自然に促す。探索の効率が良い |
| **メトロイドヴァニア型** | 能力獲得による段階的な探索拡大 | 能力型の鍵が中心。再訪による新発見が設計の核 |

### 各形態の使い分け

- **コリドー型：** ストーリー重視のゲーム（アンチャーテッドなど）
- **ハブ型：** 選択自由度の高いゲーム（ゼルダのダンジョンなど）
- **ループ型：** 効率的な探索が求められるゲーム（ダークソウルなど）
- **メトロイドヴァニア型：** 長期的な探索が核となるゲーム（ホロウナイトなど）

> **重要ポイント：** レベルの形態はプレイヤー体験を根本的に決定する。コリドーは「導かれる体験」、ハブは「選ぶ体験」、ループは「巡る体験」、メトロイドヴァニアは「開拓する体験」を生む。

---

## まとめ

- レベルデザインはミッション（タスク構造）とスペース（空間構造）に分離して分析する
- ロックと鍵のメカニズムが進行制御の基本となる
- ミッションからスペースへのマッピング方法がプレイヤー体験を決定する
- コンストラクション手法（タイト/ルース）でスペースの密度を調整する
- レベルの形態（コリドー/ハブ/ループ/メトロイドヴァニア）は目的に応じて選択する
